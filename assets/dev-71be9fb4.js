import{W as ts,P as ss,O as os,S as is,V as k,R as ns,a as I,b as S,B as C,c as O,T as v,s as as,d as cs,e as rs,f as ls,g as ds,h as us,i as hs,j as ps,k as ms,F as _,l as D,m as te,M as R,n as _e,o as at,p as ct,D as rt,q as ve,A as lt,r as gs,t as U,u as dt,v as Z,w as ut,x as Ie,G as ws,y as fs,z as ht,C as xs,E as De,L as ys,H as pe,I as bs,J as Ss,K as vs,N as Ms,Q as V,U as Fe,X as Me,Y as pt,Z as Je,_ as A,a2 as z,$ as je,a0 as Qe,a1 as js,a3 as ks,a4 as Ps,a5 as Ye,a6 as Ce,a7 as xe,a8 as ne,a9 as Xe,aa as Ue,ab as zs,ac as qe,ad as Rs,ae as Ls,af as ye,ag as Is,ah as Es,ak as le,ai as mt,aj as Bs,al as Cs,am as qs,an as Ts}from"./sign-a37302a0.js";import{d as As,n as Os,r as _s,c as Ds,a as Fs,b as Gs,e as Vs,f as Hs,G as Ns,V as Ws,X as Ks,g as Js}from"./clouds4k-899236db.js";const be=[[],["/img/ontology/Slide154.jpeg","/img/ontology/Slide155.jpeg","/img/ontology/Slide156.jpeg","/img/ontology/Slide157.jpeg","/img/ontology/Slide158.jpeg","/img/ontology/Slide159.jpeg","/img/ontology/Slide160.jpeg","/img/ontology/Slide161.jpeg","/img/ontology/Slide162.jpeg","/img/ontology/Slide163.jpeg","/img/ontology/Slide164.jpeg","/img/ontology/Slide165.jpeg","/img/ontology/Slide166.jpeg","/img/ontology/Slide167.jpeg","/img/ontology/Slide168.jpeg","/img/ontology/Slide169.jpeg","/img/ontology/Slide170.jpeg","/img/ontology/Slide171.jpeg","/img/ontology/Slide172.jpeg","/img/ontology/Slide173.jpeg","/img/ontology/Slide174.jpeg","/img/ontology/Slide175.jpeg","/img/ontology/Slide176.jpeg"],["/img/truth/Slide1.jpeg","/img/truth/Slide2.jpeg","/img/truth/Slide3.jpeg","/img/truth/Slide4.jpeg","/img/truth/Slide5.jpeg","/img/truth/Slide6.jpeg","/img/truth/Slide7.jpeg"],["https://www.youtube-nocookie.com/embed/hDbCTxm6_Ps","https://www.youtube-nocookie.com/embed/BbnfnveWUh0","https://www.youtube-nocookie.com/embed/T7QbZePP_7w","https://www.youtube-nocookie.com/embed/UPIvI8IsnHc","https://www.youtube-nocookie.com/embed/B4RsXr02M0U","https://www.youtube-nocookie.com/embed/C4sgtZa7LEI","https://www.youtube-nocookie.com/embed/mwt7qF40KF0"],["https://www.youtube-nocookie.com/embed/Nls4o_mR-sY","https://www.youtube-nocookie.com/embed/wJG6yL4ncK8","https://www.youtube-nocookie.com/embed/59dWdQuSMnk"],["https://www.youtube-nocookie.com/embed/L70T4pQv7P8"],["https://www.youtube-nocookie.com/embed/3JywTh5O8ys"],["https://www.youtube-nocookie.com/embed/1Evwgu369Jw?start=8","https://www.youtube-nocookie.com/embed/l7AWnfFRc7g"],["/img/exercises/open1/Slide1.jpeg","/img/exercises/open1/Slide2.jpeg","/img/exercises/open1/Slide3.jpeg","/img/exercises/open1/Slide4.jpeg","/img/exercises/open1/Slide5.jpeg","/img/exercises/open1/Slide6.jpeg"],["https://www.youtube-nocookie.com/embed/H-SEfK4uFa8"],["https://www.youtube-nocookie.com/embed/H-SEfK4uFa8","/img/exercises/experience1/Slide1.jpeg","/img/exercises/experience1/Slide2.jpeg","/img/exercises/experience1/Slide3.jpeg","/img/exercises/experience1/Slide4.jpeg","/img/exercises/experience1/Slide5.jpeg","/img/exercises/experience1/Slide6.jpeg"],["https://www.youtube-nocookie.com/embed/H-SEfK4uFa8","/img/exercises/experience2/Slide1.jpeg","/img/exercises/experience2/Slide2.jpeg","/img/exercises/experience2/Slide3.jpeg","/img/exercises/experience2/Slide4.jpeg","/img/exercises/experience2/Slide5.jpeg","/img/exercises/experience2/Slide6.jpeg","/img/exercises/experience2/Slide7.jpeg","/img/exercises/experience2/Slide8.jpeg","/img/exercises/experience2/Slide9.jpeg","/img/exercises/experience2/Slide10.jpeg","/img/exercises/experience2/Slide11.jpeg","/img/exercises/awareness1/Slide1.jpeg","/img/exercises/awareness1/Slide2.jpeg","/img/exercises/awareness1/Slide3.jpeg","/img/exercises/awareness1/Slide4.jpeg","/img/exercises/awareness1/Slide5.jpeg","/img/exercises/awareness1/Slide6.jpeg","/img/exercises/awareness1/Slide7.jpeg","/img/exercises/awareness1/Slide8.jpeg","/img/exercises/awareness1/Slide9.jpeg","/img/exercises/awareness1/Slide10.jpeg","/img/exercises/awareness1/Slide11.jpeg"],["https://www.youtube-nocookie.com/embed/l3bynimi8HQ"],["https://www.youtube-nocookie.com/embed/TK-MbNj83NM"],["https://www.youtube-nocookie.com/embed/x_uUEaeqFog"],["/img/anomalies/biology/Slide1.jpeg","https://www.youtube-nocookie.com/embed/bJ53o73QCRA","/img/anomalies/biology/Slide2.jpeg","https://www.youtube-nocookie.com/embed/CYuDbfFRTsw","/img/anomalies/biology/Slide3.jpeg","https://www.youtube-nocookie.com/embed/5YrmQvu5Eus"],["https://www.youtube-nocookie.com/embed/O4ndIDcDSGc","https://www.youtube-nocookie.com/embed/mccoBBf0VDM"],["/img/exercises/sixsenses/Slide1.jpeg","/img/exercises/sixsenses/Slide2.jpeg","/img/exercises/sixsenses/Slide3.jpeg","/img/exercises/sixsenses/Slide4.jpeg","/img/exercises/sixsenses/Slide5.jpeg","/img/exercises/sixsenses/Slide6.jpeg","/img/exercises/sixsenses/Slide7.jpeg","/img/exercises/sixsenses/Slide8.jpeg","/img/exercises/sixsenses/Slide9.jpeg","/img/exercises/sixsenses/Slide10.jpeg","/img/exercises/sixsenses/Slide11.jpeg","/img/exercises/sixsenses/Slide12.jpeg","/img/exercises/sixsenses/Slide13.jpeg","/img/exercises/sixsenses/Slide14.jpeg"],["/img/mindmaps/allianceFormation.png","/img/mindmaps/allianceRepair.png","/img/mindmaps/selfDisclosure.png"],["/img/mindmaps/caseFormulation.png"],["/img/mindmaps/clearingSpace.png","/img/mindmaps/focusing.png"],["/img/mindmaps/conflictSplit.png"],["https://www.youtube-nocookie.com/embed/ynHioCxAMEI","https://www.youtube-nocookie.com/embed/D8lmjmJ0OPg","/img/mindmaps/emotionTheory.png"],["/img/mindmaps/empathyExploration.png","/img/mindmaps/emphaticExploration.png"],["/img/mindmaps/meaningCreation.png"],["https://www.youtube-nocookie.com/embed/RuZRc8Axln0","https://www.youtube-nocookie.com/embed/VfsVqk-ke_s","/img/mindmaps/pascualLeoneModel.png"],["/img/mindmaps/selfSoothing.png"],["/img/mindmaps/SEU.png"],["/img/mindmaps/traumaRetelling.png"],["https://www.youtube-nocookie.com/embed/XcymHw9AZvg","https://www.youtube-nocookie.com/embed/4AHJkOF6eR8","https://www.youtube-nocookie.com/embed/wfCRSMr5eUk","https://www.youtube-nocookie.com/embed/-CxfrVifuUA","https://www.youtube-nocookie.com/embed/LRuoHv-ODrI","https://www.youtube-nocookie.com/embed/5OIy0Fdg3Ko","/img/mindmaps/treatmentPrinciples.png"],["/img/mindmaps/unfinishedBusiness.png"],["https://www.youtube-nocookie.com/embed/7xTwvfGckLo","https://www.youtube-nocookie.com/embed/31RQw-cLgOQ","https://www.youtube-nocookie.com/embed/BqshniPymrQ","https://www.youtube-nocookie.com/embed/sJl3GJLTUj4"],["https://www.youtube-nocookie.com/embed/hEHbrQ6hwFs"],["https://www.youtube-nocookie.com/embed/kNRg2DFtgOw","/img/mindmaps/pascualLeoneModel.png"],["https://www.youtube-nocookie.com/embed/TKztYwAniaw"],["https://www.youtube-nocookie.com/embed/W-koCNHdiBA","https://www.youtube-nocookie.com/embed/7H7SGkhdtNQ"],["https://www.youtube-nocookie.com/embed/OwVhyod-Ar4"],["https://www.youtube-nocookie.com/embed/FYVmfHvODJw"],["https://www.youtube-nocookie.com/embed/qsRW9Kj6TBI"],["https://www.youtube-nocookie.com/embed/i84Pllb3hBE"],["https://www.youtube-nocookie.com/embed/cxbSlP9kdno"],["https://www.youtube-nocookie.com/embed/WmYGtKB9EEA?start=1196","https://www.youtube-nocookie.com/embed/nRSBaq3vAeY","https://www.youtube-nocookie.com/embed/AQDILJb9yK8"],["https://www.youtube-nocookie.com/embed/Wxe1PkyJev8","https://www.youtube-nocookie.com/embed/hvf4seEFtnY","https://www.youtube-nocookie.com/embed/dFs9WO2B8uI","https://www.youtube-nocookie.com/embed/OjCt-L0Ph5o","https://www.youtube-nocookie.com/embed/TTSYzWkK5Qo","https://www.youtube-nocookie.com/embed/Ko2SPWgDH6o","https://www.youtube-nocookie.com/embed/TluNbkNrRKU","https://www.youtube-nocookie.com/embed/6g0_c-je7ag","https://www.youtube-nocookie.com/embed/_ee7MAtfhkM"],["https://www.youtube-nocookie.com/embed/vo8izCKHiF0","https://www.youtube-nocookie.com/embed/IxXaizglscw"],["/img/emotion/westeast.jpg"],["/img/consciousness/venn.webp"],["https://insig.ht/JNXqqRrq7ub"],["https://insig.ht/HgIAMA8i7ub"],["https://insig.ht/pJRC3QEj7ub"],["https://insig.ht/oOugqcXj7ub"],["https://insig.ht/5x3ILIYj7ub"],["https://insig.ht/uz7Qsn2j7ub"],["https://insig.ht/NagNsG3j7ub"],["https://insig.ht/xjcLSc5j7ub"],["https://insig.ht/ShAvLF6j7ub"],["https://insig.ht/C791sc8j7ub"],["https://insig.ht/dxlFGy9j7ub"],["https://insig.ht/KmO62Kak7ub"],["https://insig.ht/u0VCMynM8wb"],["https://insig.ht/flDpGwdk7ub"],["https://insig.ht/9DbYeEek7ub"],["https://insig.ht/AVvR2Rfk7ub"],["https://insig.ht/dc8G9Ygk7ub"],["https://insig.ht/cjtF7eik7ub"],["https://insig.ht/6RkW0tjk7ub"],["https://insig.ht/tAj8GHkk7ub"],["https://insig.ht/gG1vbRlk7ub"],["https://insig.ht/ookxk5mk7ub"],["https://insig.ht/Spstnkok7ub"],["https://insig.ht/7eFipVEl7ub"],["https://insig.ht/3dQKKItk7ub"],["https://insig.ht/53pMAWvk7ub"],["https://insig.ht/r2lr47wk7ub"],["https://insig.ht/cfP8Meyk7ub"],["https://insig.ht/zuKGFlzk7ub"],["https://insig.ht/jZUguRAk7ub"],["https://insig.ht/h27wgqCk7ub"],["https://insig.ht/eoBjbxDk7ub"],["https://insig.ht/KJWcVlFk7ub"],["https://insig.ht/BG3zvEGk7ub"],["https://insig.ht/rfQ94NHk7ub"],["https://insig.ht/MaSeZVIk7ub"],["https://insig.ht/N03Yr9Jk7ub"],["https://insig.ht/lgXAwHLk7ub"],["https://insig.ht/qS8fCTMk7ub"],["https://insig.ht/4pOmDkyM8wb"],["https://insig.ht/nEom02rM8wb"]];function gt(o){const e=document.createElement("ul");e.id="ul_carousel",e.dataset.slides=!0;for(let i=0;i<be[o].length;i++){const n=document.createElement("li");n.className="slide",i==0&&(n.dataset.active=!0);let p;be[o][i].includes("http")?p=document.createElement("iframe"):be[o][i].includes("/img/")&&(p=document.createElement("img")),p.src=be[o][i],n.appendChild(p),e.appendChild(n)}const s=document.getElementById("div_carousel"),t=document.getElementById("ul_carousel");s.replaceChild(e,t)}const Qs="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",Ys="generic-trigger",wt=document.querySelector("#c"),f=new ts({canvas:wt,antialias:!0});f.setPixelRatio(window.devicePixelRatio);function Xs(o){const e=o.domElement,s=e.clientWidth,t=e.clientHeight,i=e.width!==s||e.height!==t;return i&&o.setSize(s,t,!1),i}const Us=50,Zs=2,$s=.1,eo=2e3,r=new ss(Us,Zs,$s,eo);r.position.z=500;const B=new os(r,wt);B.enablePan=!1;B.maxDistance=1e3;B.minDistance=5.2;B.zoomSpeed=.3;B.rotateSpeed=.3;B.target.set(0,0,0);B.update();const F=new is,ke=new k,Y=new ns,to=new mt;new mt;let u=[],d=null,E=null,Pe=null,ft=null,m=null,w=[],Te=!0,P=!1,ae=new I(r.position.x,r.position.y,r.position.z);const Se=new I(0,0,0),L=new S;let xt=!1;const g=new js;g.onStart=function(o,e,s){};const so=document.getElementById("progress-bar");g.onProgress=function(o,e,s){so.value=e/s*100};const oo=document.querySelector(".progress-bar-container");g.onLoad=function(){oo.style.display="none"};g.onError=function(o){console.log("There was an error loading "+o)};const ze=document.getElementById("enableVRbutton");ze.addEventListener("click",()=>{ze.style.display="none",xt=!0});async function io(){navigator.xr.isSessionSupported("immersive-vr").then(o=>{if(o){const e=Ws.createButton(f);document.body.appendChild(e),ao()}})}xt==!0&&io();function no(){window.dolly=new S,window.dummyCam=new S,window.workingMatrix=new Bs,window.buttonStates={},window.gamepadIndices="",window.info={},window.controllers={},window.elapsedTime=0,window.dollyLat=90,window.dollyLng=180,window.dollyRadius=8,window.XRinSession=!1}function ao(){f.xr.enabled=!0,no(),r.position.set(0,1.6,0);const o=z(dollyLat,dollyLng,dollyRadius);dolly.position.set(o.x,o.y-1.6,o.z),dolly.add(r),F.add(dolly),r.add(dummyCam),f.xr.getController(0).addEventListener("connected",co);const s=new Ks,t=new C().setFromPoints([new I(0,0,0),new I(0,0,-1)]),i=new ks(t);i.scale.z=0,controllers={},controllers.right=Ze(0,i,s),controllers.left=Ze(1,i,s)}function co(o){Re.style.display="none",Le.style.display="none",Ge.style.display="none",info={},Js(o.data,Qs,Ys).then(({profile:e,assetPath:s})=>{console.log(JSON.stringify(e)),info.name=e.profileId,info.targetRayMode=o.data.targetRayMode,Object.entries(e.layouts).forEach(([t,i])=>{const n={};Object.values(i.components).forEach(p=>{n[p.rootNodeName]=p.gamepadIndices}),info[t]=n}),ro(info.right),console.log(JSON.stringify(info)),lo(info)})}function ro(o){buttonStates={},gamepadIndices=o,Object.keys(o).forEach(e=>{e.indexOf("touchpad")!=-1||e.indexOf("thumbstick")!=-1?buttonStates[e]={button:0,xAxis:0,yAxis:0}:buttonStates[e]=0})}function lo(o){if(o.right!==void 0){const e=f.xr.getController(0);let s=!1,t=!1;Object.keys(o.right).forEach(i=>{i.indexOf("trigger")!=-1&&(s=!0),i.indexOf("squeeze")!=-1&&(t=!0)}),s&&(e.addEventListener("selectstart",$e),e.addEventListener("selectend",et)),t&&(e.addEventListener("squeezestart",tt),e.addEventListener("squeezeend",st)),e.addEventListener("disconnected",ot)}if(o.left!==void 0){const e=f.xr.getController(1);let s=!1,t=!1;Object.keys(o.left).forEach(i=>{i.indexOf("trigger")!=-1&&(s=!0),i.indexOf("squeeze")!=-1&&(t=!0)}),s&&(e.addEventListener("selectstart",$e),e.addEventListener("selectend",et)),t&&(e.addEventListener("squeezestart",tt),e.addEventListener("squeezeend",st)),e.addEventListener("disconnected",ot)}}function Ze(o,e,s){const t=f.xr.getController(o);t.userData.selectPressed=!1,t.userData.index=o,e&&t.add(e.clone()),dolly.add(t);let i;return s&&(i=f.xr.getControllerGrip(o),i.add(s.createControllerModel(i)),dolly.add(i)),{controller:t,grip:i}}function $e(){console.log("select"),this.userData.selectPressed=!0}function et(){this.children[0].scale.z=0,this.userData.selectPressed=!1,this.userData.selected=void 0,console.log("selectend")}function tt(){this.userData.squeezePressed=!0,this.userData.selected!==void 0&&(this.attach(this.userData.selected),this.userData.attachedObject=userData.selected),console.log("squeeze")}function st(){this.userData.squeezePressed=!1,this.userData.attachedObject!==void 0&&(room.attach(this.userData.attachedObject),this.userData.attachedObject=void 0),console.log("squeezeend")}function ot(){const o=userData.index;if(console.log(`Disconnected controller ${o}`),controllers){const e=o==0?controllers.right:controllers.left;if(e){if(e.controller){const s=e.controller;for(;s.children.length>0;)s.remove(s.children[0]);dolly.remove(s)}e.grip&&dolly.remove(e.grip)}}}function uo(o){if(o.userData.selectPressed){o.children[0].scale.z=10,workingMatrix.identity().extractRotation(o.matrixWorld),Y.ray.origin.setFromMatrixPosition(o.matrixWorld),Y.ray.direction.set(0,0,-1).applyMatrix4(workingMatrix);const e=Y.intersectObjects(le);if(e.length>0){E=e[0].object;const s=le.findIndex(i=>i==e[0].object),t=V[s][6];t>0&&(de=document.querySelector(`.carousel.s${t}`),de.style.display="block"),xrSession.end().then(()=>xrSession=null)}}}function ho(){const e=f.xr.getSession().inputSources[0];if(e&&e.gamepad&&gamepadIndices&&buttonStates){const s=e.gamepad;XRinSession=!0;try{Object.entries(buttonStates).forEach(([t,i])=>{const n=gamepadIndices[t].button;if(t.indexOf("touchpad")!=-1||t.indexOf("thumbstick")!=-1){const p=gamepadIndices[t].xAxis,q=gamepadIndices[t].yAxis;buttonStates[t].button=s.buttons[n].value,buttonStates[t].xAxis=s.axes[p].toFixed(2),buttonStates[t].yAxis=s.axes[q].toFixed(2)}else buttonStates[t]=s.buttons[n].value})}catch{console.warn("An error occurred setting the ui")}}}let Ae=!1;const me=document.getElementById("introTune");me.preload="auto";me.currentTime=0;me.volume=1;const it=me.duration,Re=document.getElementById("playbutton"),Ge=document.getElementById("credits");Re.addEventListener("click",()=>{me.play(),Ae=!0,Re.style.display="none",Le.style.display="none",ze.style.display="none",Ge.style.display="none"});const Le=document.getElementById("skipbutton");Le.addEventListener("click",()=>{Re.style.display="none",Le.style.display="none",ze.style.display="none",Ge.style.display="none",r.position.z=15});let de;const po=document.querySelectorAll("[data-carousel-button]");po.forEach(o=>{o.addEventListener("click",()=>{if(document.querySelector(".carousel"),o.dataset.carouselButton==="exit")de.style.display="none";else{const e=o.dataset.carouselButton==="next"?1:-1,s=o.closest("[data-carousel]").querySelector("[data-slides]"),t=s.querySelector("[data-active]");let i=[...s.children].indexOf(t)+e;s.children[i].dataset.active=!0,delete t.dataset.active}})});const mo=document.querySelectorAll("[data-menu-button]");mo.forEach(o=>{o.addEventListener("click",()=>{if(document.querySelector(".carousel"),o.dataset.menuButton==="menu"){const e=o.closest("[data-carousel]").querySelector("[data-slides]"),s=e.querySelector("[data-active]"),t=e.querySelector("[menu]");let i=[...e.children].indexOf(t);e.children[i].dataset.active=!0,delete s.dataset.active}if(o.dataset.menuButton==="definition"){const e=o.closest("[data-carousel]").querySelector("[data-slides]"),s=e.querySelector("[data-active]"),t=e.querySelector("[definition]");let i=[...e.children].indexOf(t);e.children[i].dataset.active=!0,delete s.dataset.active}if(o.dataset.menuButton==="exercise"){const e=o.closest("[data-carousel]").querySelector("[data-slides]"),s=e.querySelector("[data-active]"),t=e.querySelector("[exercise]");let i=[...e.children].indexOf(t);e.children[i].dataset.active=!0,delete s.dataset.active}if(o.dataset.menuButton==="theory"){const e=o.closest("[data-carousel]").querySelector("[data-slides]"),s=e.querySelector("[data-active]"),t=e.querySelector("[theory]");let i=[...e.children].indexOf(t);e.children[i].dataset.active=!0,delete s.dataset.active}if(o.dataset.menuButton==="media"){const e=o.closest("[data-carousel]").querySelector("[data-slides]"),s=e.querySelector("[data-active]"),t=e.querySelector("[media]");let i=[...e.children].indexOf(t);e.children[i].dataset.active=!0,delete s.dataset.active}})});const go=document.querySelectorAll("[data-nav-button]");go.forEach(o=>{o.addEventListener("click",()=>{if(document.querySelector(".carousel"),o.dataset.navButton==="one"){const e=o.closest("[data-carousel]").querySelector("[data-slides]"),s=e.querySelector("[data-active]"),t=e.querySelector("[one]");let i=[...e.children].indexOf(t);e.children[i].dataset.active=!0,delete s.dataset.active}if(o.dataset.navButton==="two"){const e=o.closest("[data-carousel]").querySelector("[data-slides]"),s=e.querySelector("[data-active]"),t=e.querySelector("[two]");let i=[...e.children].indexOf(t);e.children[i].dataset.active=!0,delete s.dataset.active}if(o.dataset.navButton==="three"){const e=o.closest("[data-carousel]").querySelector("[data-slides]"),s=e.querySelector("[data-active]"),t=e.querySelector("[three]");let i=[...e.children].indexOf(t);e.children[i].dataset.active=!0,delete s.dataset.active}if(o.dataset.navButton==="four"){const e=o.closest("[data-carousel]").querySelector("[data-slides]"),s=e.querySelector("[data-active]"),t=e.querySelector("[four]");let i=[...e.children].indexOf(t);e.children[i].dataset.active=!0,delete s.dataset.active}if(o.dataset.navButton==="five"){const e=o.closest("[data-carousel]").querySelector("[data-slides]"),s=e.querySelector("[data-active]"),t=e.querySelector("[five]");let i=[...e.children].indexOf(t);e.children[i].dataset.active=!0,delete s.dataset.active}})});const yt=new C,bt=new C,St=new C,vt=new C,Mt=new C,jt=new C,kt=new C,Pt=new C,zt=new C,wo=new O({size:5,map:new v(g).load(as),transparent:!0,fog:!1}),fo=new O({size:5,map:new v(g).load(cs),transparent:!0,fog:!1}),xo=new O({size:5,map:new v(g).load(rs),transparent:!0,fog:!1}),yo=new O({size:5,map:new v(g).load(ls),transparent:!0,fog:!1}),bo=new O({size:5,map:new v(g).load(ds),transparent:!0,fog:!1}),So=new O({size:5,map:new v(g).load(us),transparent:!0,fog:!1}),vo=new O({size:5,map:new v(g).load(hs),transparent:!0,fog:!1}),Mo=new O({size:5,map:new v(g).load(ps),transparent:!0,fog:!1}),jo=new O({size:5,map:new v(g).load(ms),transparent:!0,fog:!1}),Rt=[];for(let o=0;o<5e3;o++){const e=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(s)+Math.abs(t)>400&&Rt.push(e,s,t)}const Lt=[];for(let o=0;o<1e3;o++){const e=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(s)+Math.abs(t)>400&&Lt.push(e,s,t)}const It=[];for(let o=0;o<500;o++){const e=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(s)+Math.abs(t)>400&&It.push(e,s,t)}const Et=[];for(let o=0;o<100;o++){const e=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(s)+Math.abs(t)>400&&Et.push(e,s,t)}const Bt=[];for(let o=0;o<25;o++){const e=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(s)+Math.abs(t)>400&&Bt.push(e,s,t)}const Ct=[];for(let o=0;o<1e3;o++){const e=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(s)+Math.abs(t)>400&&Ct.push(e,s,t)}const qt=[];for(let o=0;o<500;o++){const e=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(s)+Math.abs(t)>400&&qt.push(e,s,t)}const Tt=[];for(let o=0;o<100;o++){const e=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(s)+Math.abs(t)>400&&Tt.push(e,s,t)}const At=[];for(let o=0;o<25;o++){const e=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(s)+Math.abs(t)>400&&At.push(e,s,t)}yt.setAttribute("position",new _(Rt,3));bt.setAttribute("position",new _(Lt,3));St.setAttribute("position",new _(It,3));vt.setAttribute("position",new _(Et,3));Mt.setAttribute("position",new _(Bt,3));jt.setAttribute("position",new _(Ct,3));kt.setAttribute("position",new _(qt,3));Pt.setAttribute("position",new _(Tt,3));zt.setAttribute("position",new _(At,3));const ko=new D(yt,wo),Po=new D(bt,fo),zo=new D(St,xo),Ro=new D(vt,yo),Lo=new D(Mt,bo),Io=new D(jt,So),Eo=new D(kt,vo),Bo=new D(Pt,Mo),Co=new D(zt,jo);F.add(ko,Po,zo,Ro,Lo,Io,Eo,Bo,Co);const se=new S;F.add(se);const ge=new S,we=new S,fe=new S,oe=new S;ge.rotation.y=-Math.PI/2.5;ge.rotation.x=.15;we.rotation.y=2*Math.PI/16;we.rotation.x=.22;fe.rotation.y=2*Math.PI/2;fe.rotation.x=.31;oe.rotation.y=5*Math.PI/3;oe.rotation.x=-.41;se.add(ge);se.add(we);se.add(fe);se.add(oe);const H=new v(g);let qo=H.load(As);const Ot=new te(5,250,250);Ot.computeBoundingSphere();const x=new R(Ot,new _e({map:qo,normalMap:H.load(Os),roughnessMap:H.load(_s),normalScale:new k(1,1),metalness:0,roughness:.85,flatShading:!1,side:at}));F.add(x);const To=new ct({map:H.load(Ds),transparent:!0,side:rt,opacity:.8}),_t=new R(new te(5.04,50,50),To);x.add(_t);const Dt=new R(new te(5,500,500),new ve({vertexShader:Fs,fragmentShader:Gs,blending:lt}));Dt.position.set(0,0,0);x.add(Dt);const Ve=new R(new te(5.3,50,50),new ve({vertexShader:Vs,fragmentShader:Hs,blending:lt,side:gs,transparent:!0,depthWrite:!1}));Ve.position.set(0,0,0);Ve.scale.set(1.2,1.2,1.2);x.add(Ve);const ee=new S;x.add(ee);for(let o=0;o<U.length;o++)dt(U[o].src,U[o].lat,U[o].lng-180,U[o].size/500,U[o].radius,ee);for(let o=0;o<Z.length;o++)dt(Z[o].src,Z[o].lat,Z[o].lng-180,Z[o].size/500,Z[o].radius,L);ut(V,ee,5);ut(Me,L,7);const Ft=1e-4,He=3,Gt=.03,Vt=5.01,ue=new S;x.add(ue);let Ht=ue;Ie(V,Fe,Ft,He,Gt,Vt,Ht,!1);Ie(V,Ps,Ft,He,Gt,Vt,Ht,!0);const Ne=new S;L.add(Ne);let Ao=Ne;Ie(Me,pt,2e-4,He,.1,7.01,Ao,!1);let he=new S;ee.add(he);he.position.set(0,-5.05,0);const Oo=new ws(g);Oo.load(fs,function(o){const e=o.scene;he.add(e),e.scale.set(5,5,5),e.rotation.y+=Math.PI/2,e.rotation.x+=Math.PI/3},function(o){},function(o){console.log("An error happened")});const Nt=5,_o=new te(Nt,50,50),Do=new ht({map:new v(g).load(xs)}),re=new R(_o,Do);re.position.set(0,0,490);oe.add(re);const We=new De(16777215,1.2,2e3);We.position.set(re.position.x,re.position.y,re.position.z-Nt*1.5);oe.add(We);const Fo=H.load("https://jaranolsen.github.io/Planet/sunflare.webp"),Ee=H.load("https://jaranolsen.github.io/Planet/lensflare.webp"),X=new ys;X.position.set(0,0,0);X.addElement(new pe(Fo,2560,0));X.addElement(new pe(Ee,60,.6));X.addElement(new pe(Ee,70,.7));X.addElement(new pe(Ee,120,.9));X.addElement(new pe(Ee,70,1));We.add(X);class Ke{constructor(e,s,t,i,n,p){this.radius=e,this.texture=s,this.z=t,this.rotation=i,this.pivot=n,this.intensity=p}}let Go=new Ke(1.5,Cs,110,-5e-4,ge,.1),Vo=new Ke(2.5,qs,190,-3e-4,we,.05),Ho=new Ke(1,Ts,250,-1e-4,fe,.005),Q=[Go,Vo,Ho];for(let o=0;o<Q.length;o++){const e=new R(new te(Q[o].radius,50,50),new _e({map:new v(g).load(Q[o].texture),metalness:0,flatShading:!1,side:at}));e.position.set(Q[o].z,0,0),Q[o].pivot.add(e);const s=new De(16777215,Q[o].intensity);s.position.set(Q[o].z,0,0),e.add(s)}let Oe=!1;function No(){Oe=!0,F.add(L);let o=7,e=9,s=[],t=[];for(let a=0;a<e;a++){s[a]=[],t[a]=[];for(let b=2*Math.PI*a;b<=2*Math.PI*(a+1.0000001);b+=Math.PI/128){let W=Math.sin(b/(e*2)),K=W*o*Math.cos(b),J=W*o*Math.sin(b),ie=o/(e*Math.PI)*b;s[a].push(new I(K,ie-o,J)),a==0?b>2*Math.PI*a+(2*Math.PI*(a+1.0000001)-2*Math.PI*a)*.98&&t[a].push(new I(K,ie-o,J)):a<e?(b<2*Math.PI*a+(2*Math.PI*(a+1.0000001)-2*Math.PI*a)*.02&&t[a-1].push(new I(K,ie-o,J)),b>2*Math.PI*a+(2*Math.PI*(a+1.0000001)-2*Math.PI*a)*.98&&t[a].push(new I(K,ie-o,J))):b<2*Math.PI*a+(2*Math.PI*(a+1.0000001)-2*Math.PI*a)*.02&&t[a-1].push(new I(K,ie-o,J))}let j=new Ye(s[a]);const T=new Ce(j,64,.01,10,!1);T.computeBoundingBox();const Xt=new ve({uniforms:{color1:{value:new xe(ne[40+a])},color2:{value:new xe(ne[40+a+1])},bboxMin:{value:T.boundingBox.min},bboxMax:{value:T.boundingBox.max}},vertexShader:Xe,fragmentShader:Ue}),Ut=new R(T,Xt);L.add(Ut);const Zt=new Ce(j,64,.12-a/70,10,!1),$t=new ht({color:ne[40+a],transparent:!0,opacity:.6}),es=new R(Zt,$t);if(L.add(es),L.rotation.set(0,0,0),a!==0){let b=new Ye(t[a-1]);const W=new Ce(b,64,.15-a/70,10,!1);W.computeBoundingBox();const K=new ve({uniforms:{color1:{value:new xe(ne[40+a-1])},color2:{value:new xe(ne[40+a])},bboxMin:{value:W.boundingBox.min},bboxMax:{value:W.boundingBox.max}},vertexShader:Xe,fragmentShader:Ue}),J=new R(W,K);L.add(J)}}const i=H.load(zs);i.repeat.set(0,100),i.wrapT=qe,i.rotation=Math.PI/2;const n=H.load(Rs);n.repeat.set(1,100),n.wrapS=qe,n.wrapT=qe,n.rotation=Math.PI/2,n.offset.set(.5,0);const p=new Ls(6.05,.05,50,100),q=new _e({alphaMap:i,transparent:!0,alphaTest:.5,map:n,emissive:16777215,emissiveMap:n,emissiveIntensity:.05,color:16777215,metalness:1,roughness:.7}),M=new R(p,q);M.rotation.x=Math.PI/2,M.position.y=2.34,L.add(M)}const Wo=300,c=3e-4,Ko=new ct({color:12312012,side:rt}),N=new bs;N.moveTo(c*5,c*5);N.bezierCurveTo(c*5,c*5,c*4,0,0,0);N.bezierCurveTo(-c*6,0,-c*6,c*7,-c*6,c*7);N.bezierCurveTo(-c*6,c*11,-c*3,c*15.4,c*5,c*19);N.bezierCurveTo(c*12,c*15.4,c*16,c*11,c*16,c*7);N.bezierCurveTo(c*16,c*7,c*16,0,c*10,0);N.bezierCurveTo(c*7,0,c*5,c*5,c*5,c*5);const Be=new Ss(N);Be.center=0;Be.rotateZ(Math.PI/2);Be.rotateY(Math.PI/2);class Jo{constructor(e,s){this.lat=e,this.lng=s,this.gutt=new R(Be,Ko),this.pos=new k(e,s),this.velocity=new k(ye(0,0),ye(0,1)).setLength(.001),this.acceleration=new k,this.cartesianPosition=z(this.pos.x,this.pos.y,5.1),this.presentHeading,this.originalHeading,this.gutt.position.set(this.cartesianPosition.x,this.cartesianPosition.y,this.cartesianPosition.z),this.wander=new k(0,0),this.alignment=new k(0,0),this.cohesion=new k(0,0),this.separation=new k(0,0),this.avoidance=new k(0,0),x.add(this.gutt)}move(){this.originalHeading=Math.atan2(this.velocity.x,this.velocity.y),this.acceleration.set(0,0),this.alignment.multiplyScalar(l.alignment),this.cohesion.multiplyScalar(l.cohesion),this.separation.multiplyScalar(l.separation),this.acceleration.add(this.wander),this.acceleration.add(this.alignment),this.acceleration.add(this.cohesion),this.acceleration.add(this.separation),this.acceleration.add(this.avoidance),this.velocity.add(this.acceleration),this.velocity.clampLength(-l.max_speed,l.max_speed),this.velocity.setLength(l.max_speed),this.pos.add(this.velocity),this.pos.x<0&&(this.pos.x=Math.abs(this.pos.x),this.pos.y<180?this.pos.y+=180:this.pos.y-=180,this.velocity.x*=-1,this.velocity.y*=-1),this.pos.x>180&&(this.pos.x=180-(this.pos.x-180),this.pos.y<180?this.pos.y+=180:this.pos.y-=180,this.velocity.x*=-1,this.velocity.y*=-1),this.pos.y<0&&(this.pos.y=360+this.pos.y),this.pos.y>360&&(this.pos.y=this.pos.y-360),this.cartesianPosition=z(this.pos.x,this.pos.y,5.1),this.cartesianVelocity=z(this.velocity.x,this.velocity.y,5.1),this.presentHeading=Math.atan2(this.velocity.x,this.velocity.y),this.cp=new I,this.cp.set(this.cartesianPosition.x,this.cartesianPosition.y,this.cartesianPosition.z),this.gutt.lookAt(this.cp),this.gutt.rotateZ(this.presentHeading-this.originalHeading),this.gutt.position.set(this.cartesianPosition.x,this.cartesianPosition.y,this.cartesianPosition.z)}calculateWander(){this.wander.set(ye(-1e-4,1e-4),ye(-1e-4,1e-4)),this.wander.clampLength(-l.max_force,l.max_force)}calculateAlignment(){let e=0;this.alignment.set(0,0);for(let s=0;s<h.length;s++)h[s]!=this&&this.gutt.position.distanceTo(h[s].gutt.position)<l.alignment_perception_distance&&(this.alignment.add(h[s].velocity),e+=1);e>0&&(this.alignment.set(this.alignment.x/e,this.alignment.y/e),this.alignment.sub(this.velocity),this.alignment.clampLength(-l.max_force,l.max_force))}calculateCohesion(){let e=0;this.cohesion.set(0,0);for(let s=0;s<h.length;s++)h[s]!=this&&this.gutt.position.distanceTo(h[s].gutt.position)<l.cohesion_perception_distance&&(this.cohesion.add(h[s].pos),e+=1);e>0&&(this.cohesion.set(this.cohesion.x/e,this.cohesion.y/e),this.cohesion.sub(this.pos),this.cohesion.clampLength(-l.max_force,l.max_force))}calculateSeparation(){let e=0;this.separation.set(0,0);for(let s=0;s<h.length;s++)if(h[s]!=this&&this.gutt.position.distanceTo(h[s].gutt.position)<l.separation_perception_distance){let t=new k(this.pos.x-h[s].pos.x,this.pos.y-h[s].pos.y);t.divideScalar(this.gutt.position.distanceTo(h[s].gutt.position)),this.separation.add(t),e+=1}e>0&&(this.separation.set(this.separation.x/e,this.separation.y/e),this.separation.clampLength(-l.max_force,l.max_force))}calculateTemperature(){this.avoidance.set(0,0),this.pos.x<40&&(this.avoidance.set(Math.pow(40-this.pos.x,2)/1e5,0),this.avoidance.clampLength(-l.max_force,l.max_force)),this.pos.x>140&&(this.avoidance.set(-Math.pow(140-this.pos.x,2)/1e5,0),this.avoidance.clampLength(-l.max_force,l.max_force))}}let h=[];for(let o=0;o<Wo;o++){let e=Is(40,140,5),s=Es(0,359);h.push(new Jo(e,s))}const Wt=new Ns;let l={alignment:.016,alignment_perception_distance:.435,cohesion:.754,cohesion_perception_distance:.887,separation:.765,separation_perception_distance:.225,max_force:.0029,max_speed:.01};const G=Wt.addFolder("parameters");G.add(l,"alignment",0,.1,1e-4);G.add(l,"alignment_perception_distance",0,1,.001);G.add(l,"cohesion",0,1,.001);G.add(l,"cohesion_perception_distance",0,1,.001);G.add(l,"separation",0,1,.001);G.add(l,"separation_perception_distance",0,1,.001);G.add(l,"max_force",0,.01,1e-4);G.add(l,"max_speed",0,.1,.001);G.close();Wt.hide();const Qo=new vs(16777215,.02);F.add(Qo);const y=new Ms(15723480,0);y.penumbra=.8;y.angle=Math.PI/8;F.add(y);let $=.5;const Kt=new De(16777215,.5);Kt.position.set(0,0,0);x.add(Kt);u.push([V,V.length,Fe,ue,5.01]);u.push([Me,u[u.length-1][1]+Me.length,pt,Ne,7.01]);const ce=[];let nt;const Yo=document.querySelector("#fpsCounter"),Jt=document.createElement("div");function Qt(){window.requestAnimationFrame(()=>{const o=performance.now();for(;ce.length>0&&ce[0]<=o-1e3;)ce.shift();ce.push(o),nt=ce.length,Jt.textContent=nt,Qt()})}Yo.appendChild(Jt);Qt();function Xo(){Y.setFromCamera(ke,r);const o=Y.intersectObjects(le);if(o.length==0)for(let e=0;e<A.length;e++)A[e].pin.material.color.set(A[e].originalColor);for(let e=0;e<o.length;e++)o[e].object.material.color.set(16711680)}document.addEventListener("keyup",Uo,!1);function Uo(o){const e=o.which;if(e==65&&(w.length=0),e==73&&gt(0),e==90&&m!==null&&(w.indexOf(m)==-1&&w.push(m),console.log(w)),e==67&&(Te==!0?(x.remove(ee),x.remove(ue),Te=!1):(x.add(ee),x.add(ue),Te=!0)),e==70&&(P==!0?P=!1:P=!0),e==76&&(y.intensity==0?y.intensity=$:y.intensity==$?y.intensity=$*2:y.intensity==$*2?y.intensity=$*3:y.intensity==$*3&&(y.intensity=0)),e==81){let s="";const t=u[d][0];for(let i=0;i<t.length;i++)s=s+'    {id: "'+t[i].id+'", text: '+JSON.stringify(t[i].text)+", lat: "+t[i].lat+", lng: "+t[i].lng+", color: "+t[i].color+", size: "+t[i].size+", slides: "+t[i].slides+`},
`;console.log(s)}if(e==83&&(Oe==!1?No():(Oe=!1,F.remove(L))),e==87){const s=[u[d][0],u[d][2],u[d][3],u[d][4]];s[2].clear();const t=2e-4,i=3,n=.03;Ie(s[0],s[1],t,i,n,s[3],s[2])}if(e==187){let s=0,t=0,i={context:u[d][0]},n;d>0?n=u[d-1][1]:n=0,m&&(s=A[m].originalSize),i.context[m-n].size+=5,t=i.context[m-n].size,E.scale.set(t/s,t/s,t/s),Pe.scale.set(t/s,t/s,t/s)}if(e==189){let s=0,t=0,i={context:u[d][0]},n;d>0?n=u[d-1][1]:n=0,m&&(s=A[m].originalSize),i.context[m-n].size-=5,t=i.context[m-n].size,E.scale.set(t/s,t/s,t/s),Pe.scale.set(t/s,t/s,t/s)}}document.addEventListener("keydown",Zo,!1);function Zo(o){const e=o.which;if(w.length>0){const s={context:u[d][0],length:u[d][1],radius:u[d][4]};for(let t=0;t<w.length;t++)if(e==38||e==40||e==37||e==39){let i=Je(A[w[t]].pin.position.x,A[w[t]].pin.position.y,A[w[t]].pin.position.z);e==38?(P&&(i.lat-=.4),i.lat-=.1):e==40?(P&&(i.lat+=.4),i.lat+=.1):e==37?(P&&(i.lng-=.4),i.lng-=.1):e==39&&(P&&(i.lng+=.4),i.lng+=.1);const n=s.radius,p=s.radius+.04,q=s.radius+.05,M=z(i.lat,i.lng,n),a=z(i.lat,i.lng,p),j=z(i.lat,i.lng,q);A[w[t]].pin.position.set(M.x,M.y,M.z),je[w[t]].box.position.set(a.x,a.y,a.z),je[w[t]].tag.position.set(j.x,j.y,j.z),i=Qe(i.lat,i.lng-180);let T;d>0?T=u[d-1][1]:T=0,s.context[w[t]-T].lat=i.lat.toFixed(1),s.context[w[t]-T].lng=i.lng.toFixed(1)}}else if(E!=null){const s={context:u[d][0],length:u[d][1],radius:u[d][4]};if(e==38||e==40||e==37||e==39){let t=Je(E.position.x,E.position.y,E.position.z);e==38?(P&&(t.lat-=.4),t.lat-=.1):e==40?(P&&(t.lat+=.4),t.lat+=.1):e==37?(P&&(t.lng-=.4),t.lng-=.1):e==39&&(P&&(t.lng+=.4),t.lng+=.1);const i=s.radius,n=s.radius+.04,p=s.radius+.05,q=z(t.lat,t.lng,i),M=z(t.lat,t.lng,n),a=z(t.lat,t.lng,p);E.position.set(q.x,q.y,q.z),Pe.position.set(M.x,M.y,M.z),ft.position.set(a.x,a.y,a.z),t=Qe(t.lat,t.lng-180);let j;d>0?j=u[d-1][1]:j=0,s.context[m-j].lat=t.lat.toFixed(1),s.context[m-j].lng=t.lng.toFixed(1)}}}function $o(o){ke.x=o.clientX/window.innerWidth*2-1,ke.y=-(o.clientY/window.innerHeight)*2+1}function Yt(o){Y.setFromCamera(ke,r);const e=Y.intersectObjects(le);if(e.length>0){E=e[0].object,m=le.findIndex(n=>n==e[0].object),Pe=je[m].box,ft=je[m].tag;const s=d;for(let n=0;n<100;n++)if(m<u[n][1]){d=n,d!==s&&(w.length=0);break}let t;d>0?t=u[d-1][1]:t=0;let i=u[d][0];if(r.position.distanceTo(E.position)<4&&i[m-t].slides!==void 0){const n=V[m].slides;gt(n),de=document.querySelector(".carousel.s1"),de.style.display="block"}}}window.addEventListener("pointermove",$o);window.addEventListener("click",Yt);document.addEventListener("touchstart",Yt);V.length!==Fe.length&&console.log("ERROR: tagPlanetData.length !== tagPlanetConnections.length");function ei(){f.setAnimationLoop(ti)}function ti(o){if(f.xr.isPresenting){const t=to.getDelta();if(controllers&&Object.values(controllers).forEach(i=>{uo(i.controller)}),elapsedTime===void 0&&(elapsedTime=0),elapsedTime+=t,elapsedTime>.3&&(ho(),elapsedTime=0),XRinSession==!0){const i=Number(buttonStates.xr_standard_thumbstick.xAxis),n=Number(buttonStates.xr_standard_thumbstick.yAxis);if(i!=0||n!=0||buttonStates.a_button!=0||buttonStates.b_button!=0){dollyLng+=i*2,dollyLat+=n,dollyRadius+=(.1*buttonStates.a_button-.1*buttonStates.b_button)*(dollyRadius-5);const p=z(dollyLat,dollyLng,dollyRadius);dolly.position.set(p.x,p.y-1.6,p.z)}}}if(Xs(f)){const t=f.domElement;r.aspect=t.clientWidth/t.clientHeight,r.updateProjectionMatrix()}for(let t=0;t<h.length;t++)h[t].calculateWander(),h[t].calculateAlignment(),h[t].calculateCohesion(),h[t].calculateSeparation(),h[t].calculateTemperature(),h[t].move();Xo(),f.render(F,r);const e=r.position,s=r.rotation;y.position.set(e.x,e.y,e.z),y.rotation.set(s.x,s.y,s.z),se.rotation.y+=-1e-5,ge.rotation.y+=-3e-4,we.rotation.y+=-3e-5,fe.rotation.y+=-9e-6,oe.rotation.y+=1e-4,_t.rotation.y+=1e-5,r.position.z>15&&Ae==!0&&(r.position.z-=.0213*Math.pow(r.position.z-10,1.35)/it,x.rotation.y+=5e-4),r.position.z<-15&&Ae==!0&&(r.position.z+=.213*Math.pow(Math.abs(r.position.z)-10,1.35)/it,x.rotation.y+=5e-4),B.rotateSpeed=(r.position.distanceTo(Se)-5)/r.position.distanceTo(Se),B.zoomSpeed=(r.position.distanceTo(Se)-5)/r.position.distanceTo(Se)/3,he&&(ae.set(r.position.x,r.position.y,r.position.z),ae.normalize(),he.lookAt(ae.x,ae.y,ae.z)),B.update()}ei();
