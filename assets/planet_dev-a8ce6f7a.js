var rs=Object.defineProperty;var ls=(n,e,t)=>e in n?rs(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ze=(n,e,t)=>(ls(n,typeof e!="symbol"?e+"":e,t),t);import{G as ut,b as P,m as Z,z as Ge,M as L,W as cs,P as ds,O as us,S as hs,V as I,R as ps,a as N,B as q,c as F,T as C,s as fs,d as ms,e as xs,f as gs,g as ys,h as ws,i as vs,j as Ss,k as bs,F as _,l as D,n as Ve,o as ht,p as pt,D as ft,q as Ee,A as mt,r as Ms,t as Q,u as xt,v as ee,w as gt,x as Oe,y as Ps,C as Es,E as ke,L as Ls,H as xe,I as Ts,J as Cs,K as Is,N as As,Q as U,U as Ue,X as Le,Y as yt,_ as Ke,$ as j,af as R,a0 as Te,a1 as Qe,a2 as Rs,an as zs,a3 as Ns,a4 as et,a5 as je,a6 as Se,a7 as ie,a8 as tt,a9 as st,aa as Os,ab as Fe,ac as Bs,ad as qs,ae as be,ag as js,ah as Fs,ai as he,Z as _s,am as wt,ao as Ds,aj as Gs,ak as Vs,al as ks}from"./sign-bc6020cf.js";import{d as Us,n as Hs,r as Xs,c as $s,a as Ws,b as Ys,e as Js,f as Zs,G as Ks}from"./clouds4k-c9480500.js";const Ne=class{static createButton(e){const t=document.createElement("button");function s(){let a=null;async function r(v){v.addEventListener("end",w),await e.xr.setSession(v),t.textContent="EXIT VR",a=v}function w(){a.removeEventListener("end",w),t.textContent="ENTER VR",a=null}t.style.display="",t.style.cursor="pointer",t.style.left="calc(50% - 50px)",t.style.width="100px",t.textContent="ENTER VR",t.onmouseenter=function(){t.style.opacity="1.0"},t.onmouseleave=function(){t.style.opacity="0.5"},t.onclick=function(){if(a===null){const v={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]};navigator.xr.requestSession("immersive-vr",v).then(r)}else a.end()}}function o(){t.style.display="",t.style.cursor="auto",t.style.left="calc(50% - 75px)",t.style.width="150px",t.onmouseenter=null,t.onmouseleave=null,t.onclick=null}function i(){o(),t.textContent="VR NOT SUPPORTED"}function l(a){o(),console.warn("Exception when trying to call xr.isSessionSupported",a),t.textContent="VR NOT ALLOWED"}function p(a){a.style.position="absolute",a.style.bottom="20px",a.style.padding="12px 6px",a.style.border="1px solid #fff",a.style.borderRadius="4px",a.style.background="rgba(0,0,0,0.1)",a.style.color="#fff",a.style.font="normal 13px sans-serif",a.style.textAlign="center",a.style.opacity="0.5",a.style.outline="none",a.style.zIndex="999"}if("xr"in navigator)return t.id="VRButton",t.style.display="none",p(t),navigator.xr.isSessionSupported("immersive-vr").then(function(a){a?s():i(),a&&Ne.xrSessionIsGranted&&t.click()}).catch(l),t;{const a=document.createElement("a");return window.isSecureContext===!1?(a.href=document.location.href.replace(/^http:/,"https:"),a.innerHTML="WEBXR NEEDS HTTPS"):(a.href="https://immersiveweb.dev/",a.innerHTML="WEBXR NOT AVAILABLE"),a.style.left="calc(50% - 90px)",a.style.width="180px",a.style.textDecoration="none",p(a),a}}static registerSessionGrantedListener(){if("xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{Ne.xrSessionIsGranted=!0})}}};let de=Ne;Ze(de,"xrSessionIsGranted",!1);de.registerSessionGrantedListener();const x={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})};async function vt(n){const e=await fetch(n);if(e.ok)return e.json();throw new Error(e.statusText)}async function Qs(n){if(!n)throw new Error("No basePath supplied");return await vt(`${n}/profilesList.json`)}async function St(n,e,t=null,s=!0){if(!n)throw new Error("No xrInputSource supplied");if(!e)throw new Error("No basePath supplied");const o=await Qs(e);let i;if(n.profiles.some(a=>{const r=o[a];return r&&(i={profileId:a,profilePath:`${e}/${r.path}`,deprecated:!!r.deprecated}),!!i}),!i){if(!t)throw new Error("No matching profile name found");const a=o[t];if(!a)throw new Error(`No matching profile name found and default profile "${t}" missing.`);i={profileId:t,profilePath:`${e}/${a.path}`,deprecated:!!a.deprecated}}const l=await vt(i.profilePath);let p;if(s){let a;if(n.handedness==="any"?a=l.layouts[Object.keys(l.layouts)[0]]:a=l.layouts[n.handedness],!a)throw new Error(`No matching handedness, ${n.handedness}, in profile ${i.profileId}`);a.assetPath&&(p=i.profilePath.replace("profile.json",a.assetPath))}return{profile:l,assetPath:p}}const en={xAxis:0,yAxis:0,button:0,state:x.ComponentState.DEFAULT};function tn(n=0,e=0){let t=n,s=e;if(Math.sqrt(n*n+e*e)>1){const l=Math.atan2(e,n);t=Math.cos(l),s=Math.sin(l)}return{normalizedXAxis:t*.5+.5,normalizedYAxis:s*.5+.5}}class sn{constructor(e){this.componentProperty=e.componentProperty,this.states=e.states,this.valueNodeName=e.valueNodeName,this.valueNodeProperty=e.valueNodeProperty,this.valueNodeProperty===x.VisualResponseProperty.TRANSFORM&&(this.minNodeName=e.minNodeName,this.maxNodeName=e.maxNodeName),this.value=0,this.updateFromComponent(en)}updateFromComponent({xAxis:e,yAxis:t,button:s,state:o}){const{normalizedXAxis:i,normalizedYAxis:l}=tn(e,t);switch(this.componentProperty){case x.ComponentProperty.X_AXIS:this.value=this.states.includes(o)?i:.5;break;case x.ComponentProperty.Y_AXIS:this.value=this.states.includes(o)?l:.5;break;case x.ComponentProperty.BUTTON:this.value=this.states.includes(o)?s:0;break;case x.ComponentProperty.STATE:this.valueNodeProperty===x.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(o):this.value=this.states.includes(o)?1:0;break;default:throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`)}}}class nn{constructor(e,t){if(!e||!t||!t.visualResponses||!t.gamepadIndices||Object.keys(t.gamepadIndices).length===0)throw new Error("Invalid arguments supplied");this.id=e,this.type=t.type,this.rootNodeName=t.rootNodeName,this.touchPointNodeName=t.touchPointNodeName,this.visualResponses={},Object.keys(t.visualResponses).forEach(s=>{const o=new sn(t.visualResponses[s]);this.visualResponses[s]=o}),this.gamepadIndices=Object.assign({},t.gamepadIndices),this.values={state:x.ComponentState.DEFAULT,button:this.gamepadIndices.button!==void 0?0:void 0,xAxis:this.gamepadIndices.xAxis!==void 0?0:void 0,yAxis:this.gamepadIndices.yAxis!==void 0?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(e){if(this.values.state=x.ComponentState.DEFAULT,this.gamepadIndices.button!==void 0&&e.buttons.length>this.gamepadIndices.button){const t=e.buttons[this.gamepadIndices.button];this.values.button=t.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,t.pressed||this.values.button===1?this.values.state=x.ComponentState.PRESSED:(t.touched||this.values.button>x.ButtonTouchThreshold)&&(this.values.state=x.ComponentState.TOUCHED)}this.gamepadIndices.xAxis!==void 0&&e.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=e.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===x.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>x.AxisTouchThreshold&&(this.values.state=x.ComponentState.TOUCHED)),this.gamepadIndices.yAxis!==void 0&&e.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=e.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===x.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>x.AxisTouchThreshold&&(this.values.state=x.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach(t=>{t.updateFromComponent(this.values)})}}class on{constructor(e,t,s){if(!e)throw new Error("No xrInputSource supplied");if(!t)throw new Error("No profile supplied");this.xrInputSource=e,this.assetUrl=s,this.id=t.profileId,this.layoutDescription=t.layouts[e.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach(o=>{const i=this.layoutDescription.components[o];this.components[o]=new nn(o,i)}),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const e=[];return Object.values(this.components).forEach(t=>{e.push(t.data)}),e}updateFromGamepad(){Object.values(this.components).forEach(e=>{e.updateFromGamepad(this.xrInputSource.gamepad)})}}const an="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",rn="generic-trigger";class ln extends P{constructor(){super(),this.motionController=null,this.envMap=null}setEnvironmentMap(e){return this.envMap==e?this:(this.envMap=e,this.traverse(t=>{t.isMesh&&(t.material.envMap=this.envMap,t.material.needsUpdate=!0)}),this)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach(t=>{Object.values(t.visualResponses).forEach(s=>{const{valueNode:o,minNode:i,maxNode:l,value:p,valueNodeProperty:a}=s;!o||(a===x.VisualResponseProperty.VISIBILITY?o.visible=p:a===x.VisualResponseProperty.TRANSFORM&&(o.quaternion.slerpQuaternions(i.quaternion,l.quaternion,p),o.position.lerpVectors(i.position,l.position,p)))})}))}}function cn(n,e){Object.values(n.components).forEach(t=>{const{type:s,touchPointNodeName:o,visualResponses:i}=t;if(s===x.ComponentType.TOUCHPAD)if(t.touchPointNode=e.getObjectByName(o),t.touchPointNode){const l=new Z(.001),p=new Ge({color:255}),a=new L(l,p);t.touchPointNode.add(a)}else console.warn(`Could not find touch dot, ${t.touchPointNodeName}, in touchpad component ${t.id}`);Object.values(i).forEach(l=>{const{valueNodeName:p,minNodeName:a,maxNodeName:r,valueNodeProperty:w}=l;if(w===x.VisualResponseProperty.TRANSFORM){if(l.minNode=e.getObjectByName(a),l.maxNode=e.getObjectByName(r),!l.minNode){console.warn(`Could not find ${a} in the model`);return}if(!l.maxNode){console.warn(`Could not find ${r} in the model`);return}}l.valueNode=e.getObjectByName(p),l.valueNode||console.warn(`Could not find ${p} in the model`)})})}function nt(n,e){cn(n.motionController,e),n.envMap&&e.traverse(t=>{t.isMesh&&(t.material.envMap=n.envMap,t.material.needsUpdate=!0)}),n.add(e)}class dn{constructor(e=null){this.gltfLoader=e,this.path=an,this._assetCache={},this.gltfLoader||(this.gltfLoader=new ut)}createControllerModel(e){const t=new ln;let s=null;return e.addEventListener("connected",o=>{const i=o.data;i.targetRayMode!=="tracked-pointer"||!i.gamepad||St(i,this.path,rn).then(({profile:l,assetPath:p})=>{t.motionController=new on(i,l,p);const a=this._assetCache[t.motionController.assetUrl];if(a)s=a.scene.clone(),nt(t,s);else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(t.motionController.assetUrl,r=>{this._assetCache[t.motionController.assetUrl]=r,s=r.scene.clone(),nt(t,s)},null,()=>{throw new Error(`Asset ${t.motionController.assetUrl} missing or malformed.`)})}}).catch(l=>{console.warn(l)})}),e.addEventListener("disconnected",()=>{t.motionController=null,t.remove(s),s=null}),t}}const un="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",hn="generic-trigger",bt=document.querySelector("#c"),b=new cs({canvas:bt,antialias:!0});b.setPixelRatio(window.devicePixelRatio);function pn(n){const e=n.domElement,t=e.clientWidth,s=e.clientHeight,o=e.width!==t||e.height!==s;return o&&n.setSize(t,s,!1),o}const fn=50,mn=2,xn=.1,gn=2e3,c=new ds(fn,mn,xn,gn);c.position.z=500;const B=new us(c,bt);B.enablePan=!1;B.maxDistance=1e3;B.minDistance=5.2;B.zoomSpeed=.3;B.rotateSpeed=.3;B.target.set(0,0,0);B.update();const G=new hs,Ce=new I,J=new ps,yn=new wt;new wt;let f=[],h=null,O=null,Ie=null,Mt=null,g=null,S=[],_e=!0,A=!1,re=new N(c.position.x,c.position.y,c.position.z);const Me=new N(0,0,0),z=new P;let Pt=!1;const y=new Rs;y.onStart=function(n,e,t){};const wn=document.getElementById("progress-bar");y.onProgress=function(n,e,t){wn.value=e/t*100};const vn=document.querySelector(".progress-bar-container");y.onLoad=function(){vn.style.display="none"};y.onError=function(n){console.log("There was an error loading "+n)};const Ae=document.getElementById("enableVRbutton");Ae.addEventListener("click",()=>{Ae.style.display="none",Pt=!0});async function Sn(){navigator.xr.isSessionSupported("immersive-vr").then(n=>{if(n){const e=de.createButton(b);document.body.appendChild(e),Mn()}})}Pt==!0&&Sn();function bn(){window.dolly=new P,window.dummyCam=new P,window.workingMatrix=new Ds,window.buttonStates={},window.gamepadIndices="",window.info={},window.controllers={},window.elapsedTime=0,window.dollyLat=90,window.dollyLng=180,window.dollyRadius=8,window.XRinSession=!1}function Mn(){b.xr.enabled=!0,bn(),c.position.set(0,1.6,0);const n=R(dollyLat,dollyLng,dollyRadius);dolly.position.set(n.x,n.y-1.6,n.z),dolly.add(c),G.add(dolly),c.add(dummyCam),b.xr.getController(0).addEventListener("connected",Pn);const t=new dn,s=new q().setFromPoints([new N(0,0,0),new N(0,0,-1)]),o=new zs(s);o.scale.z=0,controllers={},controllers.right=ot(0,o,t),controllers.left=ot(1,o,t)}function Pn(n){Re.style.display="none",ze.style.display="none",He.style.display="none",info={},St(n.data,un,hn).then(({profile:e,assetPath:t})=>{console.log(JSON.stringify(e)),info.name=e.profileId,info.targetRayMode=n.data.targetRayMode,Object.entries(e.layouts).forEach(([s,o])=>{const i={};Object.values(o.components).forEach(l=>{i[l.rootNodeName]=l.gamepadIndices}),info[s]=i}),En(info.right),console.log(JSON.stringify(info)),Ln(info)})}function En(n){buttonStates={},gamepadIndices=n,Object.keys(n).forEach(e=>{e.indexOf("touchpad")!=-1||e.indexOf("thumbstick")!=-1?buttonStates[e]={button:0,xAxis:0,yAxis:0}:buttonStates[e]=0})}function Ln(n){if(n.right!==void 0){const e=b.xr.getController(0);let t=!1,s=!1;Object.keys(n.right).forEach(o=>{o.indexOf("trigger")!=-1&&(t=!0),o.indexOf("squeeze")!=-1&&(s=!0)}),t&&(e.addEventListener("selectstart",at),e.addEventListener("selectend",it)),s&&(e.addEventListener("squeezestart",rt),e.addEventListener("squeezeend",lt)),e.addEventListener("disconnected",ct)}if(n.left!==void 0){const e=b.xr.getController(1);let t=!1,s=!1;Object.keys(n.left).forEach(o=>{o.indexOf("trigger")!=-1&&(t=!0),o.indexOf("squeeze")!=-1&&(s=!0)}),t&&(e.addEventListener("selectstart",at),e.addEventListener("selectend",it)),s&&(e.addEventListener("squeezestart",rt),e.addEventListener("squeezeend",lt)),e.addEventListener("disconnected",ct)}}function ot(n,e,t){const s=b.xr.getController(n);s.userData.selectPressed=!1,s.userData.index=n,e&&s.add(e.clone()),dolly.add(s);let o;return t&&(o=b.xr.getControllerGrip(n),o.add(t.createControllerModel(o)),dolly.add(o)),{controller:s,grip:o}}function at(){console.log("select"),this.userData.selectPressed=!0}function it(){this.children[0].scale.z=0,this.userData.selectPressed=!1,this.userData.selected=void 0,console.log("selectend")}function rt(){this.userData.squeezePressed=!0,this.userData.selected!==void 0&&(this.attach(this.userData.selected),this.userData.attachedObject=userData.selected),console.log("squeeze")}function lt(){this.userData.squeezePressed=!1,this.userData.attachedObject!==void 0&&(room.attach(this.userData.attachedObject),this.userData.attachedObject=void 0),console.log("squeezeend")}function ct(){const n=userData.index;if(console.log(`Disconnected controller ${n}`),controllers){const e=n==0?controllers.right:controllers.left;if(e){if(e.controller){const t=e.controller;for(;t.children.length>0;)t.remove(t.children[0]);dolly.remove(t)}e.grip&&dolly.remove(e.grip)}}}function Tn(n){if(n.userData.selectPressed){n.children[0].scale.z=10,workingMatrix.identity().extractRotation(n.matrixWorld),J.ray.origin.setFromMatrixPosition(n.matrixWorld),J.ray.direction.set(0,0,-1).applyMatrix4(workingMatrix);const e=J.intersectObjects(he);if(e.length>0){O=e[0].object;const t=he.findIndex(o=>o==e[0].object),s=U[t][6];s>0&&(pe=document.querySelector(`.carousel.s${s}`),pe.style.display="block"),xrSession.end().then(()=>xrSession=null)}}}function Cn(){const e=b.xr.getSession().inputSources[0];if(e&&e.gamepad&&gamepadIndices&&buttonStates){const t=e.gamepad;XRinSession=!0;try{Object.entries(buttonStates).forEach(([s,o])=>{const i=gamepadIndices[s].button;if(s.indexOf("touchpad")!=-1||s.indexOf("thumbstick")!=-1){const l=gamepadIndices[s].xAxis,p=gamepadIndices[s].yAxis;buttonStates[s].button=t.buttons[i].value,buttonStates[s].xAxis=t.axes[l].toFixed(2),buttonStates[s].yAxis=t.axes[p].toFixed(2)}else buttonStates[s]=t.buttons[i].value})}catch{console.warn("An error occurred setting the ui")}}}let ce=!1;const ge=document.getElementById("introTune");ge.preload="auto";ge.currentTime=0;ge.volume=1;const Pe=ge.duration,Re=document.getElementById("playbutton"),He=document.getElementById("credits");Re.addEventListener("click",()=>{ge.play(),ce=!0,Re.style.display="none",ze.style.display="none",Ae.style.display="none",He.style.display="none"});const ze=document.getElementById("skipbutton");ze.addEventListener("click",()=>{Re.style.display="none",ze.style.display="none",Ae.style.display="none",He.style.display="none",c.position.z=15});let pe;const In=document.querySelectorAll("[data-carousel-button]");In.forEach(n=>{n.addEventListener("click",()=>{if(document.querySelector(".carousel"),n.dataset.carouselButton==="exit")pe.style.display="none";else{const e=n.dataset.carouselButton==="next"?1:-1,t=n.closest("[data-carousel]").querySelector("[data-slides]"),s=t.querySelector("[data-active]");let o=[...t.children].indexOf(s)+e;t.children[o].dataset.active=!0,delete s.dataset.active}})});const An=document.querySelectorAll("[data-menu-button]");An.forEach(n=>{n.addEventListener("click",()=>{if(document.querySelector(".carousel"),n.dataset.menuButton==="menu"){const e=n.closest("[data-carousel]").querySelector("[data-slides]"),t=e.querySelector("[data-active]"),s=e.querySelector("[menu]");let o=[...e.children].indexOf(s);e.children[o].dataset.active=!0,delete t.dataset.active}if(n.dataset.menuButton==="definition"){const e=n.closest("[data-carousel]").querySelector("[data-slides]"),t=e.querySelector("[data-active]"),s=e.querySelector("[definition]");let o=[...e.children].indexOf(s);e.children[o].dataset.active=!0,delete t.dataset.active}if(n.dataset.menuButton==="exercise"){const e=n.closest("[data-carousel]").querySelector("[data-slides]"),t=e.querySelector("[data-active]"),s=e.querySelector("[exercise]");let o=[...e.children].indexOf(s);e.children[o].dataset.active=!0,delete t.dataset.active}if(n.dataset.menuButton==="theory"){const e=n.closest("[data-carousel]").querySelector("[data-slides]"),t=e.querySelector("[data-active]"),s=e.querySelector("[theory]");let o=[...e.children].indexOf(s);e.children[o].dataset.active=!0,delete t.dataset.active}if(n.dataset.menuButton==="media"){const e=n.closest("[data-carousel]").querySelector("[data-slides]"),t=e.querySelector("[data-active]"),s=e.querySelector("[media]");let o=[...e.children].indexOf(s);e.children[o].dataset.active=!0,delete t.dataset.active}})});const Rn=document.querySelectorAll("[data-nav-button]");Rn.forEach(n=>{n.addEventListener("click",()=>{if(document.querySelector(".carousel"),n.dataset.navButton==="one"){const e=n.closest("[data-carousel]").querySelector("[data-slides]"),t=e.querySelector("[data-active]"),s=e.querySelector("[one]");let o=[...e.children].indexOf(s);e.children[o].dataset.active=!0,delete t.dataset.active}if(n.dataset.navButton==="two"){const e=n.closest("[data-carousel]").querySelector("[data-slides]"),t=e.querySelector("[data-active]"),s=e.querySelector("[two]");let o=[...e.children].indexOf(s);e.children[o].dataset.active=!0,delete t.dataset.active}if(n.dataset.navButton==="three"){const e=n.closest("[data-carousel]").querySelector("[data-slides]"),t=e.querySelector("[data-active]"),s=e.querySelector("[three]");let o=[...e.children].indexOf(s);e.children[o].dataset.active=!0,delete t.dataset.active}if(n.dataset.navButton==="four"){const e=n.closest("[data-carousel]").querySelector("[data-slides]"),t=e.querySelector("[data-active]"),s=e.querySelector("[four]");let o=[...e.children].indexOf(s);e.children[o].dataset.active=!0,delete t.dataset.active}if(n.dataset.navButton==="five"){const e=n.closest("[data-carousel]").querySelector("[data-slides]"),t=e.querySelector("[data-active]"),s=e.querySelector("[five]");let o=[...e.children].indexOf(s);e.children[o].dataset.active=!0,delete t.dataset.active}})});const Et=new q,Lt=new q,Tt=new q,Ct=new q,It=new q,At=new q,Rt=new q,zt=new q,Nt=new q,zn=new F({size:5,map:new C(y).load(fs),transparent:!0,fog:!1}),Nn=new F({size:5,map:new C(y).load(ms),transparent:!0,fog:!1}),On=new F({size:5,map:new C(y).load(xs),transparent:!0,fog:!1}),Bn=new F({size:5,map:new C(y).load(gs),transparent:!0,fog:!1}),qn=new F({size:5,map:new C(y).load(ys),transparent:!0,fog:!1}),jn=new F({size:5,map:new C(y).load(ws),transparent:!0,fog:!1}),Fn=new F({size:5,map:new C(y).load(vs),transparent:!0,fog:!1}),_n=new F({size:5,map:new C(y).load(Ss),transparent:!0,fog:!1}),Dn=new F({size:5,map:new C(y).load(bs),transparent:!0,fog:!1}),Ot=[];for(let n=0;n<5e3;n++){const e=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(t)+Math.abs(s)>400&&Ot.push(e,t,s)}const Bt=[];for(let n=0;n<1e3;n++){const e=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(t)+Math.abs(s)>400&&Bt.push(e,t,s)}const qt=[];for(let n=0;n<500;n++){const e=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(t)+Math.abs(s)>400&&qt.push(e,t,s)}const jt=[];for(let n=0;n<100;n++){const e=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(t)+Math.abs(s)>400&&jt.push(e,t,s)}const Ft=[];for(let n=0;n<25;n++){const e=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(t)+Math.abs(s)>400&&Ft.push(e,t,s)}const _t=[];for(let n=0;n<1e3;n++){const e=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(t)+Math.abs(s)>400&&_t.push(e,t,s)}const Dt=[];for(let n=0;n<500;n++){const e=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(t)+Math.abs(s)>400&&Dt.push(e,t,s)}const Gt=[];for(let n=0;n<100;n++){const e=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(t)+Math.abs(s)>400&&Gt.push(e,t,s)}const Vt=[];for(let n=0;n<25;n++){const e=(Math.random()-.5)*2e3,t=(Math.random()-.5)*2e3,s=(Math.random()-.5)*2e3;Math.abs(e)+Math.abs(t)+Math.abs(s)>400&&Vt.push(e,t,s)}Et.setAttribute("position",new _(Ot,3));Lt.setAttribute("position",new _(Bt,3));Tt.setAttribute("position",new _(qt,3));Ct.setAttribute("position",new _(jt,3));It.setAttribute("position",new _(Ft,3));At.setAttribute("position",new _(_t,3));Rt.setAttribute("position",new _(Dt,3));zt.setAttribute("position",new _(Gt,3));Nt.setAttribute("position",new _(Vt,3));const Gn=new D(Et,zn),Vn=new D(Lt,Nn),kn=new D(Tt,On),Un=new D(Ct,Bn),Hn=new D(It,qn),Xn=new D(At,jn),$n=new D(Rt,Fn),Wn=new D(zt,_n),Yn=new D(Nt,Dn);G.add(Gn,Vn,kn,Un,Hn,Xn,$n,Wn,Yn);const ne=new P;G.add(ne);const ye=new P,we=new P,ve=new P,oe=new P;ye.rotation.y=-Math.PI/2.5;ye.rotation.x=.15;we.rotation.y=2*Math.PI/16;we.rotation.x=.22;ve.rotation.y=2*Math.PI/2;ve.rotation.x=.31;oe.rotation.y=9*Math.PI/6;oe.rotation.x=-.41;ne.add(ye);ne.add(we);ne.add(ve);ne.add(oe);const k=new C(y),kt=new Z(5,250,250);kt.computeBoundingSphere();const T=new L(kt,new Ve({map:k.load(Us),normalMap:k.load(Hs),roughnessMap:k.load(Xs),normalScale:new I(3,3),metalness:0,roughness:.85,flatShading:!1,side:ht}));G.add(T);const Jn=new pt({map:k.load($s),transparent:!0,side:ft,opacity:.8}),Ut=new L(new Z(5.04,50,50),Jn);T.add(Ut);const Ht=new L(new Z(5,500,500),new Ee({vertexShader:Ws,fragmentShader:Ys,blending:mt}));Ht.position.set(0,0,0);T.add(Ht);const Xe=new L(new Z(5.3,50,50),new Ee({vertexShader:Js,fragmentShader:Zs,blending:mt,side:Ms,transparent:!0,depthWrite:!1}));Xe.position.set(0,0,0);Xe.scale.set(1.2,1.2,1.2);T.add(Xe);const se=new P;T.add(se);for(let n=0;n<Q.length;n++)xt(Q[n].src,Q[n].lat,Q[n].lng-180,Q[n].size/500,Q[n].radius,se);for(let n=0;n<ee.length;n++)xt(ee[n].src,ee[n].lat,ee[n].lng-180,ee[n].size/500,ee[n].radius,z);gt(U,se,5);gt(Le,z,7);const Xt=1e-4,$e=3,$t=.03,Wt=5.01,fe=new P;T.add(fe);let Yt=fe;Oe(U,Ue,Xt,$e,$t,Wt,Yt,!1);Oe(U,Ns,Xt,$e,$t,Wt,Yt,!0);const We=new P;z.add(We);let Zn=We;Oe(Le,yt,2e-4,$e,.1,7.01,Zn,!1);let me=new P;se.add(me);me.position.set(0,-5.05,0);const Kn=new ut(y);Kn.load(Ps,function(n){const e=n.scene;me.add(e),e.scale.set(5,5,5),e.rotation.y+=Math.PI/2,e.rotation.x+=Math.PI/3},function(n){},function(n){console.log("An error happened")});const Jt=5,Qn=new Z(Jt,50,50),eo=new Ge({map:new C(y).load(Es)}),ue=new L(Qn,eo);ue.position.set(0,0,490);oe.add(ue);const Ye=new ke(16777215,1.2,2e3);Ye.position.set(ue.position.x,ue.position.y,ue.position.z-Jt*1.5);oe.add(Ye);const to=k.load("https://jaranolsen.github.io/Planet/sunflare.webp"),Be=k.load("https://jaranolsen.github.io/Planet/lensflare.webp"),K=new Ls;K.position.set(0,0,0);K.addElement(new xe(to,2560,0));K.addElement(new xe(Be,60,.6));K.addElement(new xe(Be,70,.7));K.addElement(new xe(Be,120,.9));K.addElement(new xe(Be,70,1));Ye.add(K);class Je{constructor(e,t,s,o,i,l){this.radius=e,this.texture=t,this.z=s,this.rotation=o,this.pivot=i,this.intensity=l}}let so=new Je(1.5,Gs,110,-5e-4,ye,.1),no=new Je(2.5,Vs,190,-3e-4,we,.05),oo=new Je(1,ks,250,-1e-4,ve,.005),Y=[so,no,oo];for(let n=0;n<Y.length;n++){const e=new L(new Z(Y[n].radius,50,50),new Ve({map:new C(y).load(Y[n].texture),metalness:0,flatShading:!1,side:ht}));e.position.set(Y[n].z,0,0),Y[n].pivot.add(e);const t=new ke(16777215,Y[n].intensity);t.position.set(Y[n].z,0,0),e.add(t)}let De=!1;function ao(){De=!0,G.add(z);let n=7,e=9,t=[],s=[];for(let r=0;r<e;r++){t[r]=[],s[r]=[];for(let E=2*Math.PI*r;E<=2*Math.PI*(r+1.0000001);E+=Math.PI/128){let X=Math.sin(E/(e*2)),$=X*n*Math.cos(E),W=X*n*Math.sin(E),ae=n/(e*Math.PI)*E;t[r].push(new N($,ae-n,W)),r==0?E>2*Math.PI*r+(2*Math.PI*(r+1.0000001)-2*Math.PI*r)*.98&&s[r].push(new N($,ae-n,W)):r<e?(E<2*Math.PI*r+(2*Math.PI*(r+1.0000001)-2*Math.PI*r)*.02&&s[r-1].push(new N($,ae-n,W)),E>2*Math.PI*r+(2*Math.PI*(r+1.0000001)-2*Math.PI*r)*.98&&s[r].push(new N($,ae-n,W))):E<2*Math.PI*r+(2*Math.PI*(r+1.0000001)-2*Math.PI*r)*.02&&s[r-1].push(new N($,ae-n,W))}let w=new et(t[r]);const v=new je(w,64,.01,10,!1);v.computeBoundingBox();const ss=new Ee({uniforms:{color1:{value:new Se(ie[40+r])},color2:{value:new Se(ie[40+r+1])},bboxMin:{value:v.boundingBox.min},bboxMax:{value:v.boundingBox.max}},vertexShader:tt,fragmentShader:st}),ns=new L(v,ss);z.add(ns);const os=new je(w,64,.12-r/70,10,!1),as=new Ge({color:ie[40+r],transparent:!0,opacity:.6}),is=new L(os,as);if(z.add(is),z.rotation.set(0,0,0),r!==0){let E=new et(s[r-1]);const X=new je(E,64,.15-r/70,10,!1);X.computeBoundingBox();const $=new Ee({uniforms:{color1:{value:new Se(ie[40+r-1])},color2:{value:new Se(ie[40+r])},bboxMin:{value:X.boundingBox.min},bboxMax:{value:X.boundingBox.max}},vertexShader:tt,fragmentShader:st}),W=new L(X,$);z.add(W)}}const o=k.load(Os);o.repeat.set(0,100),o.wrapT=Fe,o.rotation=Math.PI/2;const i=k.load(Bs);i.repeat.set(1,100),i.wrapS=Fe,i.wrapT=Fe,i.rotation=Math.PI/2,i.offset.set(.5,0);const l=new qs(6.05,.05,50,100),p=new Ve({alphaMap:o,transparent:!0,alphaTest:.5,map:i,emissive:16777215,emissiveMap:i,emissiveIntensity:.05,color:16777215,metalness:1,roughness:.7}),a=new L(l,p);a.rotation.x=Math.PI/2,a.position.y=2.34,z.add(a)}const io=300,d=3e-4,ro=new pt({color:12312012,side:ft}),H=new Ts;H.moveTo(d*5,d*5);H.bezierCurveTo(d*5,d*5,d*4,0,0,0);H.bezierCurveTo(-d*6,0,-d*6,d*7,-d*6,d*7);H.bezierCurveTo(-d*6,d*11,-d*3,d*15.4,d*5,d*19);H.bezierCurveTo(d*12,d*15.4,d*16,d*11,d*16,d*7);H.bezierCurveTo(d*16,d*7,d*16,0,d*10,0);H.bezierCurveTo(d*7,0,d*5,d*5,d*5,d*5);const qe=new Cs(H);qe.center=0;qe.rotateZ(Math.PI/2);qe.rotateY(Math.PI/2);class lo{constructor(e,t){this.lat=e,this.lng=t,this.gutt=new L(qe,ro),this.pos=new I(e,t),this.velocity=new I(be(0,0),be(0,1)).setLength(.001),this.acceleration=new I,this.cartesianPosition=R(this.pos.x,this.pos.y,5.1),this.presentHeading,this.originalHeading,this.gutt.position.set(this.cartesianPosition.x,this.cartesianPosition.y,this.cartesianPosition.z),this.wander=new I(0,0),this.alignment=new I(0,0),this.cohesion=new I(0,0),this.separation=new I(0,0),this.avoidance=new I(0,0),T.add(this.gutt)}move(){this.originalHeading=Math.atan2(this.velocity.x,this.velocity.y),this.acceleration.set(0,0),this.alignment.multiplyScalar(u.alignment),this.cohesion.multiplyScalar(u.cohesion),this.separation.multiplyScalar(u.separation),this.acceleration.add(this.wander),this.acceleration.add(this.alignment),this.acceleration.add(this.cohesion),this.acceleration.add(this.separation),this.acceleration.add(this.avoidance),this.velocity.add(this.acceleration),this.velocity.clampLength(-u.max_speed,u.max_speed),this.velocity.setLength(u.max_speed),this.pos.add(this.velocity),this.pos.x<0&&(this.pos.x=Math.abs(this.pos.x),this.pos.y<180?this.pos.y+=180:this.pos.y-=180,this.velocity.x*=-1,this.velocity.y*=-1),this.pos.x>180&&(this.pos.x=180-(this.pos.x-180),this.pos.y<180?this.pos.y+=180:this.pos.y-=180,this.velocity.x*=-1,this.velocity.y*=-1),this.pos.y<0&&(this.pos.y=360+this.pos.y),this.pos.y>360&&(this.pos.y=this.pos.y-360),this.cartesianPosition=R(this.pos.x,this.pos.y,5.1),this.cartesianVelocity=R(this.velocity.x,this.velocity.y,5.1),this.presentHeading=Math.atan2(this.velocity.x,this.velocity.y),this.cp=new N,this.cp.set(this.cartesianPosition.x,this.cartesianPosition.y,this.cartesianPosition.z),this.gutt.lookAt(this.cp),this.gutt.rotateZ(this.presentHeading-this.originalHeading),this.gutt.position.set(this.cartesianPosition.x,this.cartesianPosition.y,this.cartesianPosition.z)}calculateWander(){this.wander.set(be(-1e-4,1e-4),be(-1e-4,1e-4)),this.wander.clampLength(-u.max_force,u.max_force)}calculateAlignment(){let e=0;this.alignment.set(0,0);for(let t=0;t<m.length;t++)m[t]!=this&&this.gutt.position.distanceTo(m[t].gutt.position)<u.alignment_perception_distance&&(this.alignment.add(m[t].velocity),e+=1);e>0&&(this.alignment.set(this.alignment.x/e,this.alignment.y/e),this.alignment.sub(this.velocity),this.alignment.clampLength(-u.max_force,u.max_force))}calculateCohesion(){let e=0;this.cohesion.set(0,0);for(let t=0;t<m.length;t++)m[t]!=this&&this.gutt.position.distanceTo(m[t].gutt.position)<u.cohesion_perception_distance&&(this.cohesion.add(m[t].pos),e+=1);e>0&&(this.cohesion.set(this.cohesion.x/e,this.cohesion.y/e),this.cohesion.sub(this.pos),this.cohesion.clampLength(-u.max_force,u.max_force))}calculateSeparation(){let e=0;this.separation.set(0,0);for(let t=0;t<m.length;t++)if(m[t]!=this&&this.gutt.position.distanceTo(m[t].gutt.position)<u.separation_perception_distance){let s=new I(this.pos.x-m[t].pos.x,this.pos.y-m[t].pos.y);s.divideScalar(this.gutt.position.distanceTo(m[t].gutt.position)),this.separation.add(s),e+=1}e>0&&(this.separation.set(this.separation.x/e,this.separation.y/e),this.separation.clampLength(-u.max_force,u.max_force))}calculateTemperature(){this.avoidance.set(0,0),this.pos.x<40&&(this.avoidance.set(Math.pow(40-this.pos.x,2)/1e5,0),this.avoidance.clampLength(-u.max_force,u.max_force)),this.pos.x>140&&(this.avoidance.set(-Math.pow(140-this.pos.x,2)/1e5,0),this.avoidance.clampLength(-u.max_force,u.max_force))}}let m=[];for(let n=0;n<io;n++){let e=js(40,140,5),t=Fs(0,359);m.push(new lo(e,t))}const Zt=new Ks;let u={alignment:.016,alignment_perception_distance:.435,cohesion:.754,cohesion_perception_distance:.887,separation:.765,separation_perception_distance:.225,max_force:.0029,max_speed:.01};const V=Zt.addFolder("parameters");V.add(u,"alignment",0,.1,1e-4);V.add(u,"alignment_perception_distance",0,1,.001);V.add(u,"cohesion",0,1,.001);V.add(u,"cohesion_perception_distance",0,1,.001);V.add(u,"separation",0,1,.001);V.add(u,"separation_perception_distance",0,1,.001);V.add(u,"max_force",0,.01,1e-4);V.add(u,"max_speed",0,.1,.001);V.close();Zt.hide();const co=new Is(16777215,.02);G.add(co);const M=new As(15723480,0);M.penumbra=.8;M.angle=Math.PI/4;G.add(M);let te=.5;const Kt=new ke(16777215,.5);Kt.position.set(0,0,0);T.add(Kt);f.push([U,U.length,Ue,fe,5.01]);f.push([Le,f[f.length-1][1]+Le.length,yt,We,7.01]);const le=[];let dt;const uo=document.querySelector("#fpsCounter"),Qt=document.createElement("div");function es(){window.requestAnimationFrame(()=>{const n=performance.now();for(;le.length>0&&le[0]<=n-1e3;)le.shift();le.push(n),dt=le.length,Qt.textContent=dt,es()})}uo.appendChild(Qt);es();function ho(){J.setFromCamera(Ce,c);const n=J.intersectObjects(he);if(n.length==0)for(let e=0;e<j.length;e++)j[e].pin.material.color.set(j[e].originalColor);for(let e=0;e<n.length;e++)n[e].object.material.color.set(16711680)}document.addEventListener("keyup",po,!1);function po(n){const e=n.which;if(e==65&&(S.length=0),e==90&&g!==null&&(S.indexOf(g)==-1&&S.push(g),console.log(S)),e==67&&(_e==!0?(T.remove(se),T.remove(fe),_e=!1):(T.add(se),T.add(fe),_e=!0)),e==70&&(A==!0?A=!1:A=!0),e==76&&(M.intensity==0?M.intensity=te:M.intensity==te?M.intensity=te*2:M.intensity==te*2?M.intensity=te*3:M.intensity==te*3&&(M.intensity=0)),e==81){let t="";const s=f[h][0];for(let o=0;o<s.length;o++)t=t+'    {id: "'+s[o].id+'", text: '+JSON.stringify(s[o].text)+", lat: "+s[o].lat+", lng: "+s[o].lng+", color: "+s[o].color+", size: "+s[o].size+", slides: "+s[o].slides+`},
`;console.log(t)}if(e==83&&(De==!1?ao():(De=!1,G.remove(z))),e==87){const t=[f[h][0],f[h][2],f[h][3],f[h][4]];t[2].clear();const s=2e-4,o=3,i=.03;Oe(t[0],t[1],s,o,i,t[3],t[2])}if(e==187){let t=0,s=0,o={context:f[h][0]},i;h>0?i=f[h-1][1]:i=0,g&&(t=j[g].originalSize),o.context[g-i].size+=5,s=o.context[g-i].size,O.scale.set(s/t,s/t,s/t),Ie.scale.set(s/t,s/t,s/t)}if(e==189){let t=0,s=0,o={context:f[h][0]},i;h>0?i=f[h-1][1]:i=0,g&&(t=j[g].originalSize),o.context[g-i].size-=5,s=o.context[g-i].size,O.scale.set(s/t,s/t,s/t),Ie.scale.set(s/t,s/t,s/t)}}document.addEventListener("keydown",fo,!1);function fo(n){const e=n.which;if(S.length>0){const t={context:f[h][0],length:f[h][1],radius:f[h][4]};for(let s=0;s<S.length;s++)if(e==38||e==40||e==37||e==39){let o=Ke(j[S[s]].pin.position.x,j[S[s]].pin.position.y,j[S[s]].pin.position.z);e==38?(A&&(o.lat-=.4),o.lat-=.1):e==40?(A&&(o.lat+=.4),o.lat+=.1):e==37?(A&&(o.lng-=.4),o.lng-=.1):e==39&&(A&&(o.lng+=.4),o.lng+=.1);const i=t.radius,l=t.radius+.04,p=t.radius+.05,a=R(o.lat,o.lng,i),r=R(o.lat,o.lng,l),w=R(o.lat,o.lng,p);j[S[s]].pin.position.set(a.x,a.y,a.z),Te[S[s]].box.position.set(r.x,r.y,r.z),Te[S[s]].tag.position.set(w.x,w.y,w.z),o=Qe(o.lat,o.lng-180);let v;h>0?v=f[h-1][1]:v=0,t.context[S[s]-v].lat=o.lat.toFixed(1),t.context[S[s]-v].lng=o.lng.toFixed(1)}}else if(O!=null){const t={context:f[h][0],length:f[h][1],radius:f[h][4]};if(e==38||e==40||e==37||e==39){let s=Ke(O.position.x,O.position.y,O.position.z);e==38?(A&&(s.lat-=.4),s.lat-=.1):e==40?(A&&(s.lat+=.4),s.lat+=.1):e==37?(A&&(s.lng-=.4),s.lng-=.1):e==39&&(A&&(s.lng+=.4),s.lng+=.1);const o=t.radius,i=t.radius+.04,l=t.radius+.05,p=R(s.lat,s.lng,o),a=R(s.lat,s.lng,i),r=R(s.lat,s.lng,l);O.position.set(p.x,p.y,p.z),Ie.position.set(a.x,a.y,a.z),Mt.position.set(r.x,r.y,r.z),s=Qe(s.lat,s.lng-180);let w;h>0?w=f[h-1][1]:w=0,t.context[g-w].lat=s.lat.toFixed(1),t.context[g-w].lng=s.lng.toFixed(1)}}}function mo(n){Ce.x=n.clientX/window.innerWidth*2-1,Ce.y=-(n.clientY/window.innerHeight)*2+1}function ts(n){J.setFromCamera(Ce,c);const e=J.intersectObjects(he);if(e.length>0){O=e[0].object,g=he.findIndex(i=>i==e[0].object),Ie=Te[g].box,Mt=Te[g].tag;const t=h;for(let i=0;i<100;i++)if(g<f[i][1]){h=i,h!==t&&(S.length=0);break}let s;h>0?s=f[h-1][1]:s=0;let o=f[h][0];if(c.position.distanceTo(O.position)<4&&o[g-s].slides!==void 0){const i=U[g].slides;_s(i),pe=document.querySelector(".carousel.s1"),pe.style.display="block"}}}window.addEventListener("pointermove",mo);window.addEventListener("click",ts);window.addEventListener("touchstart",ts);U.length!==Ue.length&&console.log("ERROR: tagPlanetData.length !== tagPlanetConnections.length");function xo(){b.setAnimationLoop(go)}function go(n){if(b.xr.isPresenting){const s=yn.getDelta();if(controllers&&Object.values(controllers).forEach(o=>{Tn(o.controller)}),elapsedTime===void 0&&(elapsedTime=0),elapsedTime+=s,elapsedTime>.3&&(Cn(),elapsedTime=0),XRinSession==!0){const o=Number(buttonStates.xr_standard_thumbstick.xAxis),i=Number(buttonStates.xr_standard_thumbstick.yAxis);if(o!=0||i!=0||buttonStates.a_button!=0||buttonStates.b_button!=0){dollyLng+=o*2,dollyLat+=i,dollyRadius+=(.1*buttonStates.a_button-.1*buttonStates.b_button)*(dollyRadius-5);const l=R(dollyLat,dollyLng,dollyRadius);dolly.position.set(l.x,l.y-1.6,l.z)}}}if(pn(b)){const s=b.domElement;c.aspect=s.clientWidth/s.clientHeight,c.updateProjectionMatrix()}for(let s=0;s<m.length;s++)m[s].calculateWander(),m[s].calculateAlignment(),m[s].calculateCohesion(),m[s].calculateSeparation(),m[s].calculateTemperature(),m[s].move();ho(),b.render(G,c);const e=c.position,t=c.rotation;M.position.set(e.x,e.y,e.z),M.rotation.set(t.x,t.y,t.z),ne.rotation.y+=-1e-5,ye.rotation.y+=-3e-4,we.rotation.y+=-3e-5,ve.rotation.y+=-9e-6,oe.rotation.y+=-1e-4,Ut.rotation.y+=1e-5,c.position.z>15&&ce==!0&&(c.position.z-=.0213*Math.pow(c.position.z-10,1.35)/Pe),c.position.z<-15&&ce==!0&&(c.position.z+=.213*Math.pow(Math.abs(c.position.z)-10,1.35)/Pe),ce==!0&&(c.position.x+=.4/Pe,c.position.y+=.1/Pe),c.position.z>-15&&c.position.z<15&&(ce=!1),B.rotateSpeed=(c.position.distanceTo(Me)-5)/c.position.distanceTo(Me),B.zoomSpeed=(c.position.distanceTo(Me)-5)/c.position.distanceTo(Me)/3,me&&(re.set(c.position.x,c.position.y,c.position.z),re.normalize(),me.lookAt(re.x,re.y,re.z)),B.update()}xo();
